# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды:
1. Выполнить команду для установки зависимостей:
```
npm install
```
или
```
yarn
```
2. Запустить проект командой:
```
npm run start
```
или
```
yarn start
```
## Сборка проекта
```
npm run build
```
или
```
yarn build
```

## Архитектура приложения

Проект представляет собой типовой интернет-магазин с товарами для разработчиков.

Приложение разработанно согласно шаблону программирования **Model-View-Presenter (MVP)**. Данный шаблон разделяет архитектуру приложения на три модуля: 
1. **Модель (Model)** - содержит основную логику приложения, отвечает за данные, методы работы с ними и структуру программы.
2. **Представление (View)** - отвечает за визуализацию информации, которую получает от модели. View отображает данные на уровне пользовательского интерфейса.
3. **Презентор (Presenter)** - действует как мост между моделью и представлением. Извлекает данные из модели и обновляет представление, обеспечивая правильное представление данных.
В нашем случае презентором является корневой файл **index.ts**.

Взаимодействия внутри приложения происходят через события. Модели инициализируют события, слушатели событий в основном коде выполняют передачу данных компонентам отображения, а также вычислениями между этой передачей, и еще они меняют значения в моделях.
 
## Интерфейсы описывающие основные данные в приложении

+ Интерфейс **IProduct** описывает данные карточки товаров:

<details>
<summary>Интерфейс IProduct</summary>

```ts
interface IProduct {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number | null;
};
```

</details>

***

+ Интерфейс **IResponseProducts** описывает ответ на GET запрос к API:

<details>
<summary>Интерфейс IProduct</summary>

```ts
interface IResponseProducts {
  total: number;
  items: IProduct[];
};
```

</details>

***

+ Интерфейс **IResponseOrder** описывает ответ на POST запрос к API:

<details>
<summary>Интерфейс IResponseOrder</summary>

```ts
interface IResponseOrder {
  id: string;
  total: number;
};
```

</details>

***

+ Интерфейс **IOrderContacts** описывает контактные данные пользователя для формирования заказа

<details>
<summary>Интерфейс IOrderContacts</summary>

```ts
interface IOrderContacts {
  email: string;
  phone: string;
};
```

</details>

***

+ Интерфейс **IOrderData** описывает данные пользователя для формирования заказа

<details>
<summary>Интерфейс IOrderData</summary>

```ts
interface IOrderData {
  payment: string;
  address: string;
};
```

</details>

***

+ Интерфейс **IOrder** описывает все данные, которые необходимо отправить на сервер для оформления заказа, он раширяется интерфейсами **IOrderContacts** и **IOrderData**

<details>
<summary> Интерфейс IOrder</summary>

```ts
interface IOrder extends IOrderContacts, IOrderData {
  total: number;
  items: string[];
};
```

</details>

***

## Базовые классы и их методы

### **Класс api**
Содержит логику отправки запросов на сервер. В конструктор принимает адресс сервера, на который необходимо делать запрос и опциальный обьект - API-заголовок.   
Содержит следующие методы:
+ ```get``` - принимает в качестве аргумента эндпоинт. Данный метод делает GET запрос на заданный эндпоинт.
+ ```post``` - принимает три аргумента: эндпоинт, обьект с данными и метод запроса(по умолчанию используется POST). Данный метод отправляет данные из аргумента на заданный эндпоинт.

### **Класс Component**
Абстрактный класс для моделей Представление(View) и работы с DOM. В конструктор принимает ```container: HTMLElement``` - элемент DOM, который содержит разметку для рендера на странице.   
Содержит следующие методы:
+ ```toggleClass(element: HTMLElement, className: string, force?: boolean)``` - принимает в качестве аргументов: HTML-элемент, имя класса и булево значение. Данный метод служит для переключения класса элемента в зависимости от третьего аргумента.
+ ``` setText(element: HTMLElement, value: unknown)``` - принимает в качестве аргументов: HTML-элемент и значение value - текст для HTML-элемента. Данный метод нужен для установки текста HTML-элементу.
+ ```setDisabled(element: HTMLElement, state: boolean)``` - принимает в качестве аргументов: HTML-элемент и булево значение. Данный метод нужен для добавления и удаления атрибута disabled у элемента.
+ ```setHidden(element: HTMLElement)``` - принимает в качестве аргумента: HTML-элемент. Данный метод позволяет скрыть HTML-элемент. 
+ ```setVisible(element: HTMLElement)``` - принимает в качестве аргумента: HTML-элемент. Данный метод позволяет показать скрытый HTML-элемент. 
+ ```setImage(element: HTMLImageElement, src: string, alt?: string)``` - принимает в качестве аргументов: HTMLImage-элемент, ссылку на картинку и текст, который будет записан в атрибут alt img элемента. Данный атрибут устанавливает изображение, содержимое атрибута alt в указанный HTMLImageElement.
+ ```render(data?: Partial<T>)``` - принимает в качестве аргумента обьект. Данный метод возвращает HTML-элемент, для дальнейшего его отображения на странице.

### **Класс EventEmitter**
Данный класс используется для управления событиями, позволяя обьектам взаимодействовать друг с другом без жесткой связи. Он используется в презенторе и в слоях приложения для обработки событий и их генерации.  
Содержит следующие методы:
+ ```on<T extends object>(eventName: EventName, callback: (event: T) => void)``` - принимает в качестве аргумента имя ивента и колбек функцию. Данный метод позволяет подписаться на событие.
+ ```emit<T extends object>(eventName: string, data?: T)``` - принимает в качестве аргумента имя ивента и обьект с данными. Данный метод позволяет инициализировать событие.

### **Класс Model**
Абстрактный класс для создания модели данных с функционалом оповещения о событиях.  
Содержит следующий метод:
+ ```mitChanges(event: string, payload?: object)``` - принимает в качестве аргументов название события и дополнительные данные, связанные с событиями. Данный метод сообщает подписчикам об изменении в модели данных.

***

## Слой модели данных (Model)

### Класс **WebLarekModel**